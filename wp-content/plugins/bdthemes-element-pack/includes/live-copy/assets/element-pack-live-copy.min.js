!function(e,t,n,o){"use strict";var i={init:function(e){i.globalVars(),i.loadxdLocalStorage(),i.loadContextMenuGroupsHooks()},globalVars:function(t){e.lc_ajax_url=bdt_ep_live_copy.ajax_url,e.lc_ajax_nonce=bdt_ep_live_copy.nonce,e.lc_key=bdt_ep_live_copy.magic_key},loadxdLocalStorage:function(){xdLocalStorage.init({iframeUrl:"https://elementpack.pro/eptools/magic/index.html",initCallback:function(){}})},loadContextMenuGroupsHooks:function(){elementor.hooks.addFilter("elements/section/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)})),elementor.hooks.addFilter("elements/widget/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)})),elementor.hooks.addFilter("elements/column/contextMenuGroups",(function(e,t){return i.prepareMenuItem(e,t)}))},prepareMenuItem:function(e,t){var n=_.findIndex(e,(function(e){return"clipboard"===e.name}));return e.splice(n+1,0,{name:"bdt-ep-live-paste",actions:[{name:"ep-live-paste",title:"Live Paste",icon:"bdt-wi-element-pack",callback:function(){i.livePaste(t)}}]}),e},livePaste:function(e){return xdLocalStorage.getItem(lc_key,(function(t){const o=JSON.parse(t.value);console.log(o);const i=o.widget,a=JSON.stringify(i),l=/\.(jpeg|jpg|png|gif|svg|)/gi.test(a),r=e.model.get("elType");var c={elType:"section",settings:i.settings},s={at:0};if("column"===r)var p=e.getContainer().parent;else p=e.getContainer();var u=p.parent;c.elements=i.elements,s.at=p.view.getOption("_index")+1,c.isInner=!1;var d=$e.run("document/elements/create",{container:u,model:c,options:s});l&&n.ajax({url:lc_ajax_url,method:"POST",data:{action:"ep_elementor_import_live_copy_assets_files",data:a,security:lc_ajax_nonce},beforeSend:function(){d.view.$el.append('<div id="bdt-live-copy-importing-images-loader">Importing Images..</div>')}}).done((function(e){if(e.success){var t=e.data[0];c.settings=t.settings,c.elType=t.elType,"widget"===t.elType?c.widgetType=t.widgetType:c.elements=t.elements,setTimeout((function(){$e.run("document/elements/delete",{container:d});$e.run("document/elements/create",{model:c,container:u,options:s})}),800),n("#bdt-live-copy-importing-images-loader").remove()}}))}))}};i.init()}(window,document,jQuery,xdLocalStorage);